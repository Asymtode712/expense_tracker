<div *ngIf="SignUpContinue">
  <app-welcome-loader></app-welcome-loader>
</div>

<div class="signup-page-wrapper">
  
  <mat-card class="signup-card">
    
    <mat-card-header class="signup-header">
      <mat-icon color="primary" class="header-icon">account_balance_wallet</mat-icon>
      <mat-card-title class="paragraph">Create your Expense Tracker Account</mat-card-title>
      <mat-card-subtitle>Start tracking your spending today. It's fast and free.</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="signUpForm" class="signup-form">
        
        <div class="inputs">
          <mat-form-field appearance="outline">
            <mat-label>Full Name</mat-label>
            <input matInput placeholder="John Doe" formControlName="name" />
            <mat-error *ngIf="signUpForm.get('name')?.errors &&
              signUpForm.get('name')?.hasError('required') && signUpForm.get('name')?.touched">
              Name is required
            </mat-error>
            <mat-error *ngIf="signUpForm.get('name')?.errors &&
              signUpForm.get('name')?.hasError('pattern') && signUpForm.get('name')?.touched">
              Please enter a valid name (letters and spaces only)
            </mat-error>
          </mat-form-field>
        </div>
        
        <div class="inputs">
          <mat-form-field appearance="outline">
            <mat-label>Email Address</mat-label>
            <input matInput placeholder="name@example.com" type="email" formControlName="gmail" />
            <mat-error *ngIf="signUpForm.get('gmail')?.errors &&
              signUpForm.get('gmail')?.hasError('required') && signUpForm.get('gmail')?.touched">
              Email is required
            </mat-error>
            <mat-error *ngIf="signUpForm.get('gmail')?.errors &&
              signUpForm.get('gmail')?.hasError('email') && signUpForm.get('gmail')?.touched">
              Please enter a valid email address
            </mat-error>
          </mat-form-field>
        </div>

        <div class="inputs">
          <mat-form-field appearance="outline">
            <mat-label>Username</mat-label>
            <input matInput placeholder="my_tracker_name" formControlName="username" />
            <mat-error *ngIf="signUpForm.get('username')?.errors &&
              signUpForm.get('username')?.hasError('required') && signUpForm.get('username')?.touched">
              Username is required
            </mat-error>
          </mat-form-field>
        </div>

        <div class="inputs">
          <mat-form-field appearance="outline">
            <mat-label>Create Password</mat-label>
            <input matInput formControlName="password" type="password" />
            <mat-error *ngIf="signUpForm.get('password')?.errors &&
              signUpForm.get('password')?.hasError('required') && signUpForm.get('password')?.touched">
              Password is required
            </mat-error>
            <mat-error *ngIf="signUpForm.get('password')?.errors &&
              signUpForm.get('password')?.hasError('minlength') && signUpForm.get('password')?.touched">
              Password should be at least 8 characters
            </mat-error>
          </mat-form-field>
        </div>
        
        <div class="signUpBtn">
          <button
            type="submit"
            *ngIf="!SignUpContinue"
            mat-raised-button
            color="primary"
            [disabled]="signUpForm.invalid"
            (click)="onProceed()"
          >
            <mat-icon>how_to_reg</mat-icon>
            Create Account
          </button>
          
          <button *ngIf="SignUpContinue" class="btn btn-success" type="button" disabled>
            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            Creating...
          </button>
        </div>
      </form>
    </mat-card-content>
    
    <mat-card-actions class="card-footer">
      <p>Already have an account?</p>
      
      <button 
        mat-stroked-button 
        color="accent" 
        (click)="onSwitchToLogin()" 
        class="switch-button"
      >
        <mat-icon>login</mat-icon> Log In
      </button>
      
    </mat-card-actions>
  </mat-card>

</div>